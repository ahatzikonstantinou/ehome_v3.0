$def with (mqtt_servers, containers, domains, item_types, items)
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eHome</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="/static/scripts/paho-mqtt.min.js"></script>
    <script>
        // mqttServer data
        var mqttServers = [
            $for server in mqtt_servers:
                { id: $(loop.index-1), address: "$server['address']", port: "$server['port']", ws_port: "$server['ws_port']", username: "$(server['username'] if server['username'] is not None else "null" )", password: "$(server['password'] if server['password'] is not None else "null" )"},
        ];

        var containers = [
            $for container in containers:
                { id: $(loop.index-1), containerName: "$container['containerName']", parentContainer: "$(container['parentContainer'] if container['parentContainer'] is not None else "null" )", guid: "$container['guid']" },
        ];
        // replace string null with actual null
        containers.forEach(function(c){
            if( c.parentContainer == "null" )
            {
                c.parentContainer = null;
            }
        })

        var item_types = [
            $for item_type in item_types:
                { id: "$item_type['id']", description:"$item_type['description']" },
        ];
                
        var items = [
            $for item in items:
                { id: $(loop.index-1), itemName: "$item['itemName']", itemMqttServer: $item['itemMqttServer'], itemContainer: "$item['itemContainer']", itemType: "$item['itemType']", publish: "$item['publish']", subscribe: "$item['subscribe']" },
        ];
            
        const client = {};

        function connectToMqtt(server) {
            console.log(server);

            client[server['address']] = new Paho.Client(server.address, Number(server.ws_port), "clientId" + Math.random());
            client[server['address']].onConnectionLost = onConnectionLost;
            client[server['address']].onMessageArrived = onMessageArrived;
            client[server['address']].connect({ onSuccess: onConnect, invocationContext: server });
        }

        function onConnect(connectOptions) {
            console.log("Connected to MQTT server " + connectOptions.invocationContext['address'] + ":" + connectOptions.invocationContext['ws_port']);
            client[connectOptions.invocationContext['address']].subscribe("test/topic");
        }

        function onConnectionLost(responseObject) {
            if (responseObject.errorCode !== 0) {
                console.log("Connection lost:", responseObject.errorMessage);
            }
        }

        function onMessageArrived(message) {
            console.log("Message received:", message.payloadString);
            const ul = document.getElementById("messages");
            const li = document.createElement("li");
            li.appendChild(document.createTextNode(message.payloadString));
            ul.appendChild(li);
        }

        window.onload = function () {
            mqttServers.forEach(connectToMqtt);
        };
    </script>
</head>
<body>
    <h1>MQTT Client</h1>
    <ul id="messages"></ul>
    <script>
        
    </script>
</body>
</html>